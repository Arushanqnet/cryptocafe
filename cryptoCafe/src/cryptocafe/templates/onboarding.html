<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Onboarding - CryptoCafe</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    >

    <style>
        /* Overlay container to cover full screen */
        #loadingOverlay {
          position: fixed;
          top: 0; left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0,0,0,0.7); /* semi-transparent black */
          display: none; /* hidden by default */
          justify-content: center;
          align-items: center;
          z-index: 9999; /* on top of everything */
        }
        .overlay-content {
          text-align: center;
          color: #fff;
        }
        .overlay-logo {
          width: 100px;
          height: 100px;
          margin-bottom: 2rem;
        }
        /* Larger progress bar styling */
        .overlay-progress {
          width: 300px;
          margin: 0 auto;
        }
        .overlay-progress .progress-bar {
          transition: width 0.3s ease;
        }
      </style>
  </head>


  <body>
    <div class="container py-4">
      <h1>Welcome to CryptoCafe!</h1>
      <p>Weâ€™d love to know your interests and how you want your reels to be narrated.</p>
      
      <form action="/save_onboarding" method="POST" class="row g-3"  onsubmit="showLoadingOverlay()" >
        <!-- Card-based topic selection -->
        <div class="col-12">
          <h4>Select the topics that interest you:</h4>
          <div class="row">
            <!-- Example topics: BTC, ETH, DeFi, NFTs -->
            <div class="col-md-3">
              <div class="card mb-3">
                <div class="card-body">
                  <input type="checkbox" name="topics" value="BTC" id="topic-btc">
                  <label for="topic-btc">Bitcoin (BTC)</label>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card mb-3">
                <div class="card-body">
                  <input type="checkbox" name="topics" value="ETH" id="topic-eth">
                  <label for="topic-eth">Ethereum (ETH)</label>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card mb-3">
                <div class="card-body">
                  <input type="checkbox" name="topics" value="DeFi" id="topic-defi">
                  <label for="topic-defi">DeFi</label>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card mb-3">
                <div class="card-body">
                  <input type="checkbox" name="topics" value="NFTs" id="topic-nft">
                  <label for="topic-nft">NFTs</label>
                </div>
              </div>
            </div>
            <!-- Add more if you like -->
          </div>
        </div>

        <div class="col-12">
            <h4>How do you want CryptoCafe to narrate your reels?</h4>
            <textarea name="style" class="form-control" rows="3" placeholder="Enter narration style here"></textarea>
          </div>
          

        <div class="col-12">
          <button class="btn btn-primary">Save Preferences</button>
        </div>
      </form>
    </div>

     <!-- The Full-Screen Overlay -->
     <div id="loadingOverlay">
        <div class="overlay-content">
          <!-- Replace with your own icon/logo -->
          <img
            class="overlay-logo"
            src="https://via.placeholder.com/100x100.png?text=Logo"
            alt="Loading Logo"
          >
          <div class="mb-3">Loading, please wait...</div>
  
          <!-- Bootstrap progress bar -->
          <div class="progress overlay-progress" style="height: 25px;">
            <div
              id="overlayProgressBar"
              class="progress-bar progress-bar-striped progress-bar-animated bg-info"
              role="progressbar"
              style="width: 0%;"
              aria-valuemin="0"
              aria-valuemax="100"
            >
              0%
            </div>
          </div>
        </div>
      </div>
  
      <!-- Bootstrap JS -->
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
      </script>
  
      <!-- JavaScript for showing/animating overlay -->
      <script>
        let overlayTimer = null;
        let currentValue = 0;
  
        function showLoadingOverlay() {
          // 1) Show the overlay
          document.getElementById("loadingOverlay").style.display = "flex";
  
          // 2) Reset progress
          currentValue = 0;
          const pb = document.getElementById("overlayProgressBar");
          pb.style.width = "0%";
          pb.textContent = "0%";
  
          // 3) Start a timer to animate progress from 0% -> 80~90%
          //    We'll let the final page load finish the rest.
          overlayTimer = setInterval(() => {
            if (currentValue < 90) {
              currentValue += 2; // increment by 2
              pb.style.width = currentValue + "%";
              pb.textContent = currentValue + "%";
            } else {
              // Once we get to 90, we just hold.
              clearInterval(overlayTimer);
            }
          }, 200); // update every 0.2s
        }
      </script>
    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
    </script>
  </body>
</html>
